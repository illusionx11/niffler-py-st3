{
  "uid" : "2d3726fdaabb29be",
  "name" : "Get Spending After Update",
  "fullName" : "tests.rest_api.test_spendings_api.TestSpendingsAPI#test_get_spending_after_update",
  "historyId" : "29af1402da704a47aad0b6aa1637f022",
  "time" : {
    "start" : 1755396904001,
    "stop" : 1755396904056,
    "duration" : 55
  },
  "status" : "skipped",
  "statusMessage" : "XFAIL Добавляется один день к дате\n\nAssertionError: assert '2024-06-14' == '2024-06-15'\n  \n  - 2024-06-15\n  ?          ^\n  + 2024-06-14\n  ?          ^",
  "statusTrace" : "self = <tests.rest_api.test_spendings_api.TestSpendingsAPI object at 0x7f8531806780>\nspends_client = <clients.spends_client.SpendsClient object at 0x7f8538749010>\nspendings_list = [SpendGet(id='5b493540-def3-4cf0-8753-54c499783ca4', amount=2750.5, description='Уникальная вещь2', category=CategoryG...='niffler_qa', archived=False), spendDate='2023-04-01T21:00:00.000+00:00', currency='EUR', username='niffler_qa'), ...]\ndelete_spendings_lock = None\n\n    @allure.story(Story.get_spending)\n    @pytest.mark.xfail(reason=\"Добавляется один день к дате\")\n    def test_get_spending_after_update(\n        self, spends_client: SpendsClient, spendings_list: list[SpendGet], delete_spendings_lock\n    ):\n        spend = random.choice(spendings_list)\n        new_amount = 9999.99\n        new_description = \"Multiple fields updated\"\n        new_date = \"2024-06-15T12:00:00.000Z\"\n        updated_spend = spends_client.update_spending(\n            data=SpendAdd(\n                id=spend.id,\n                amount=new_amount,\n                category=CategoryAdd(name=spend.category.name),\n                currency=spend.currency,\n                description=new_description,\n                spendDate=new_date\n            )\n        )\n        received_spend = spends_client.get_spending_by_id(updated_spend.id)\n        with allure.step(\"Проверка, что получен правильный расход после обновления\"):\n            assert received_spend.id == updated_spend.id\n            assert received_spend.amount == new_amount\n            assert received_spend.category.name == spend.category.name\n            assert received_spend.currency == spend.currency\n            assert received_spend.description == new_description\n>           assert received_spend.spendDate.split(\"T\")[0] == new_date.split(\"T\")[0]\nE           AssertionError: assert '2024-06-14' == '2024-06-15'\nE             \nE             - 2024-06-15\nE             ?          ^\nE             + 2024-06-14\nE             ?          ^\n\ntests/rest_api/test_spendings_api.py:281: AssertionError",
  "flaky" : false,
  "newFailed" : false,
  "beforeStages" : [ {
    "name" : "[S] Userdata Db",
    "time" : {
      "start" : 1755396899325,
      "stop" : 1755396899325,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S]  Session Faker",
    "time" : {
      "start" : 1755396899160,
      "stop" : 1755396899260,
      "duration" : 100
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Auth Api Token",
    "time" : {
      "start" : 1755396899366,
      "stop" : 1755396900879,
      "duration" : 1513
    },
    "status" : "passed",
    "steps" : [ {
      "name" : "API Регистрация пользователя",
      "time" : {
        "start" : 1755396899366,
        "stop" : 1755396899969,
        "duration" : 603
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /register",
        "time" : {
          "start" : 1755396899372,
          "stop" : 1755396899618,
          "duration" : 246
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "9bd179a889977d27",
          "name" : "Request",
          "source" : "9bd179a889977d27.html",
          "type" : "text/html",
          "size" : 1353
        }, {
          "uid" : "8c29bf17ebd671c1",
          "name" : "Response text 200",
          "source" : "8c29bf17ebd671c1.txt",
          "type" : "text/plain",
          "size" : 3731
        }, {
          "uid" : "66f5057dbf1e3dc1",
          "name" : "Response headers 200",
          "source" : "66f5057dbf1e3dc1.json",
          "type" : "application/json",
          "size" : 603
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      }, {
        "name" : "POST /register",
        "time" : {
          "start" : 1755396899623,
          "stop" : 1755396899968,
          "duration" : 345
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "b429f37b02383658",
          "name" : "Request",
          "source" : "b429f37b02383658.html",
          "type" : "text/html",
          "size" : 2184
        }, {
          "uid" : "567f778f2f64c12",
          "name" : "Response text 201",
          "source" : "567f778f2f64c12.txt",
          "type" : "text/plain",
          "size" : 2279
        }, {
          "uid" : "22342498810e7aa8",
          "name" : "Response headers 201",
          "source" : "22342498810e7aa8.json",
          "type" : "application/json",
          "size" : 526
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "username",
        "value" : "'niffler_qa'"
      }, {
        "name" : "password",
        "value" : "'password'"
      } ],
      "stepsCount" : 2,
      "attachmentsCount" : 6,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Авторизация и получение токена",
      "time" : {
        "start" : 1755396899969,
        "stop" : 1755396900879,
        "duration" : 910
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /oauth2/authorize",
        "time" : {
          "start" : 1755396899975,
          "stop" : 1755396900220,
          "duration" : 245
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "12157cac89da8fd9",
          "name" : "Request",
          "source" : "12157cac89da8fd9.html",
          "type" : "text/html",
          "size" : 1687
        }, {
          "uid" : "4b421beb6f6e6746",
          "name" : "Response text 200",
          "source" : "4b421beb6f6e6746.txt",
          "type" : "text/plain",
          "size" : 2897
        }, {
          "uid" : "d4a6355f0cd716ee",
          "name" : "Response headers 200",
          "source" : "d4a6355f0cd716ee.json",
          "type" : "application/json",
          "size" : 526
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      }, {
        "name" : "POST /login",
        "time" : {
          "start" : 1755396900240,
          "stop" : 1755396900704,
          "duration" : 464
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "6d3b51e64563515e",
          "name" : "Request",
          "source" : "6d3b51e64563515e.html",
          "type" : "text/html",
          "size" : 1867
        }, {
          "uid" : "9134f455ef07a496",
          "name" : "Response text 200",
          "source" : "9134f455ef07a496.txt",
          "type" : "text/plain",
          "size" : 417
        }, {
          "uid" : "753b11cd8b881602",
          "name" : "Response headers 200",
          "source" : "753b11cd8b881602.json",
          "type" : "application/json",
          "size" : 287
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      }, {
        "name" : "POST /oauth2/token",
        "time" : {
          "start" : 1755396900711,
          "stop" : 1755396900879,
          "duration" : 168
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "65c5accad112f0cb",
          "name" : "Request",
          "source" : "65c5accad112f0cb.html",
          "type" : "text/html",
          "size" : 2846
        }, {
          "uid" : "c13f48a5a49df1ac",
          "name" : "Response json 200",
          "source" : "c13f48a5a49df1ac.json",
          "type" : "application/json",
          "size" : 1537
        }, {
          "uid" : "a435797904beb041",
          "name" : "Response headers 200",
          "source" : "a435797904beb041.json",
          "type" : "application/json",
          "size" : 440
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "username",
        "value" : "'niffler_qa'"
      }, {
        "name" : "password",
        "value" : "'password'"
      } ],
      "stepsCount" : 3,
      "attachmentsCount" : 9,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 7,
    "attachmentsCount" : 15,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[S] Auth Db",
    "time" : {
      "start" : 1755396899324,
      "stop" : 1755396899325,
      "duration" : 1
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Faker",
    "time" : {
      "start" : 1755396902233,
      "stop" : 1755396902236,
      "duration" : 3
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Client Envs",
    "time" : {
      "start" : 1755396899260,
      "stop" : 1755396899261,
      "duration" : 1
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "861c3ee56eee84b4",
      "name" : "client_envs.json",
      "source" : "861c3ee56eee84b4.json",
      "type" : "application/json",
      "size" : 66
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 1,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[S] Lock Manager",
    "time" : {
      "start" : 1755396899264,
      "stop" : 1755396899264,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Spends Db",
    "time" : {
      "start" : 1755396899264,
      "stop" : 1755396899324,
      "duration" : 60
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Auth Client",
    "time" : {
      "start" : 1755396899264,
      "stop" : 1755396899264,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[F] Spendings List",
    "time" : {
      "start" : 1755396903966,
      "stop" : 1755396903999,
      "duration" : 33
    },
    "status" : "passed",
    "steps" : [ {
      "name" : "API Получение списка трат",
      "time" : {
        "start" : 1755396903966,
        "stop" : 1755396903999,
        "duration" : 33
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /api/v2/spends/all",
        "time" : {
          "start" : 1755396903973,
          "stop" : 1755396903999,
          "duration" : 26
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "bb685a75662fcf22",
          "name" : "Request",
          "source" : "bb685a75662fcf22.html",
          "type" : "text/html",
          "size" : 3619
        }, {
          "uid" : "9f7e994d6d7d7d86",
          "name" : "Response json 200",
          "source" : "9f7e994d6d7d7d86.json",
          "type" : "application/json",
          "size" : 6337
        }, {
          "uid" : "579bc4beb714bf83",
          "name" : "Response headers 200",
          "source" : "579bc4beb714bf83.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 2,
    "attachmentsCount" : 3,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[S] Cleanup",
    "time" : {
      "start" : 1755396899325,
      "stop" : 1755396899366,
      "duration" : 41
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "f0decfaf7f71fc9d",
      "name" : "select niffler-spend",
      "source" : "f0decfaf7f71fc9d.txt",
      "type" : "text/plain",
      "size" : 27
    }, {
      "uid" : "29647f656440ec3d",
      "name" : "select niffler-spend",
      "source" : "29647f656440ec3d.txt",
      "type" : "text/plain",
      "size" : 23
    }, {
      "uid" : "1b44b3423eb81c5",
      "name" : "show niffler-spend",
      "source" : "1b44b3423eb81c5.txt",
      "type" : "text/plain",
      "size" : 32
    }, {
      "uid" : "b8e697550e797bcc",
      "name" : "DELETE niffler-spend",
      "source" : "b8e697550e797bcc.txt",
      "type" : "text/plain",
      "size" : 17
    }, {
      "uid" : "14ea4ea014b8fb3d",
      "name" : "DELETE niffler-spend",
      "source" : "14ea4ea014b8fb3d.txt",
      "type" : "text/plain",
      "size" : 20
    }, {
      "uid" : "bbbe91d59c283218",
      "name" : "select niffler-userdata",
      "source" : "bbbe91d59c283218.txt",
      "type" : "text/plain",
      "size" : 27
    }, {
      "uid" : "1e06c635a0a8b527",
      "name" : "select niffler-userdata",
      "source" : "1e06c635a0a8b527.txt",
      "type" : "text/plain",
      "size" : 23
    }, {
      "uid" : "152a13404583c702",
      "name" : "show niffler-userdata",
      "source" : "152a13404583c702.txt",
      "type" : "text/plain",
      "size" : 32
    }, {
      "uid" : "6663df5db6da20a9",
      "name" : "DELETE niffler-userdata",
      "source" : "6663df5db6da20a9.txt",
      "type" : "text/plain",
      "size" : 22
    }, {
      "uid" : "5d9f98a5dd27d618",
      "name" : "DELETE niffler-userdata",
      "source" : "5d9f98a5dd27d618.txt",
      "type" : "text/plain",
      "size" : 62
    }, {
      "uid" : "36472613eeb946b1",
      "name" : "select niffler-auth",
      "source" : "36472613eeb946b1.txt",
      "type" : "text/plain",
      "size" : 27
    }, {
      "uid" : "4b9a80a25e88cb88",
      "name" : "select niffler-auth",
      "source" : "4b9a80a25e88cb88.txt",
      "type" : "text/plain",
      "size" : 23
    }, {
      "uid" : "15d563f252dc2228",
      "name" : "show niffler-auth",
      "source" : "15d563f252dc2228.txt",
      "type" : "text/plain",
      "size" : 32
    }, {
      "uid" : "3dc4d08e9a1677",
      "name" : "DELETE niffler-auth",
      "source" : "3dc4d08e9a1677.txt",
      "type" : "text/plain",
      "size" : 21
    }, {
      "uid" : "5c43afa617b51eb5",
      "name" : "DELETE niffler-auth",
      "source" : "5c43afa617b51eb5.txt",
      "type" : "text/plain",
      "size" : 62
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 15,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[S] Server Envs",
    "time" : {
      "start" : 1755396899261,
      "stop" : 1755396899264,
      "duration" : 3
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "32a098de35a0ece4",
      "name" : "server_envs.json",
      "source" : "32a098de35a0ece4.json",
      "type" : "application/json",
      "size" : 582
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 1,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[S] Spends Client",
    "time" : {
      "start" : 1755396900879,
      "stop" : 1755396900879,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Spendings Data",
    "time" : {
      "start" : 1755396902236,
      "stop" : 1755396902237,
      "duration" : 1
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[F] Delete Spendings Lock",
    "time" : {
      "start" : 1755396903999,
      "stop" : 1755396904000,
      "duration" : 1
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[C] Add Spendings",
    "time" : {
      "start" : 1755396902237,
      "stop" : 1755396902721,
      "duration" : 484
    },
    "status" : "passed",
    "steps" : [ {
      "name" : "API Получение списка трат",
      "time" : {
        "start" : 1755396902237,
        "stop" : 1755396902477,
        "duration" : 240
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /api/v2/spends/all",
        "time" : {
          "start" : 1755396902244,
          "stop" : 1755396902477,
          "duration" : 233
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "9c693c31ebabffbf",
          "name" : "Request",
          "source" : "9c693c31ebabffbf.html",
          "type" : "text/html",
          "size" : 3619
        }, {
          "uid" : "5e89561f7cd5fd97",
          "name" : "Response json 200",
          "source" : "5e89561f7cd5fd97.json",
          "type" : "application/json",
          "size" : 1167
        }, {
          "uid" : "77dc668b9a8671f7",
          "name" : "Response headers 200",
          "source" : "77dc668b9a8671f7.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1755396902478,
        "stop" : 1755396902540,
        "duration" : 62
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1755396902492,
          "stop" : 1755396902540,
          "duration" : 48
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "41d5cfa6c6879276",
          "name" : "Request",
          "source" : "41d5cfa6c6879276.html",
          "type" : "text/html",
          "size" : 4378
        }, {
          "uid" : "e474c16a42a8f8ea",
          "name" : "Response json 201",
          "source" : "e474c16a42a8f8ea.json",
          "type" : "application/json",
          "size" : 434
        }, {
          "uid" : "4b08e35154175b9a",
          "name" : "Response headers 201",
          "source" : "4b08e35154175b9a.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=261.0, description='Do amount.', category=CategoryAdd(id=None, name='Развлечения', username=None, archived=False), spendDate='2012-09-11T23:52:18.000Z', currency='KZT', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1755396902540,
        "stop" : 1755396902595,
        "duration" : 55
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1755396902547,
          "stop" : 1755396902595,
          "duration" : 48
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "18e2d75bd4543c88",
          "name" : "Request",
          "source" : "18e2d75bd4543c88.html",
          "type" : "text/html",
          "size" : 4341
        }, {
          "uid" : "42448ae29c3b7502",
          "name" : "Response json 201",
          "source" : "42448ae29c3b7502.json",
          "type" : "application/json",
          "size" : 417
        }, {
          "uid" : "5c7e41b72288a5b0",
          "name" : "Response headers 201",
          "source" : "5c7e41b72288a5b0.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=928.0, description='Build move.', category=CategoryAdd(id=None, name='Продукты', username=None, archived=False), spendDate='2016-10-30T09:18:50.000Z', currency='EUR', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1755396902595,
        "stop" : 1755396902653,
        "duration" : 58
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1755396902607,
          "stop" : 1755396902652,
          "duration" : 45
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "eb9c79fc7c97ffcf",
          "name" : "Request",
          "source" : "eb9c79fc7c97ffcf.html",
          "type" : "text/html",
          "size" : 4302
        }, {
          "uid" : "de6ad1311b450c5",
          "name" : "Response json 201",
          "source" : "de6ad1311b450c5.json",
          "type" : "application/json",
          "size" : 399
        }, {
          "uid" : "2e73691775b32526",
          "name" : "Response headers 201",
          "source" : "2e73691775b32526.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=736.0, description='Base month.', category=CategoryAdd(id=None, name='Спорт', username=None, archived=False), spendDate='2023-04-02T03:27:16.000Z', currency='EUR', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1755396902653,
        "stop" : 1755396902691,
        "duration" : 38
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1755396902663,
          "stop" : 1755396902691,
          "duration" : 28
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "9407441241564c7f",
          "name" : "Request",
          "source" : "9407441241564c7f.html",
          "type" : "text/html",
          "size" : 4292
        }, {
          "uid" : "15f72bf27cd3af4c",
          "name" : "Response json 201",
          "source" : "15f72bf27cd3af4c.json",
          "type" : "application/json",
          "size" : 394
        }, {
          "uid" : "44d061d1946bb423",
          "name" : "Response headers 201",
          "source" : "44d061d1946bb423.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=354.0, description='Ahead.', category=CategoryAdd(id=None, name='Спорт', username=None, archived=False), spendDate='2021-05-03T08:24:06.000Z', currency='KZT', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1755396902691,
        "stop" : 1755396902721,
        "duration" : 30
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1755396902695,
          "stop" : 1755396902720,
          "duration" : 25
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "71c2f2ca9cf2e219",
          "name" : "Request",
          "source" : "71c2f2ca9cf2e219.html",
          "type" : "text/html",
          "size" : 4388
        }, {
          "uid" : "44188a903da3078b",
          "name" : "Response json 201",
          "source" : "44188a903da3078b.json",
          "type" : "application/json",
          "size" : 439
        }, {
          "uid" : "623e66866ed66e6d",
          "name" : "Response headers 201",
          "source" : "623e66866ed66e6d.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=18.0, description='Source approach.', category=CategoryAdd(id=None, name='Развлечения', username=None, archived=False), spendDate='2008-08-02T08:41:06.000Z', currency='KZT', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 12,
    "attachmentsCount" : 18,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  } ],
  "testStage" : {
    "status" : "skipped",
    "statusMessage" : "XFAIL Добавляется один день к дате\n\nAssertionError: assert '2024-06-14' == '2024-06-15'\n  \n  - 2024-06-15\n  ?          ^\n  + 2024-06-14\n  ?          ^",
    "statusTrace" : "self = <tests.rest_api.test_spendings_api.TestSpendingsAPI object at 0x7f8531806780>\nspends_client = <clients.spends_client.SpendsClient object at 0x7f8538749010>\nspendings_list = [SpendGet(id='5b493540-def3-4cf0-8753-54c499783ca4', amount=2750.5, description='Уникальная вещь2', category=CategoryG...='niffler_qa', archived=False), spendDate='2023-04-01T21:00:00.000+00:00', currency='EUR', username='niffler_qa'), ...]\ndelete_spendings_lock = None\n\n    @allure.story(Story.get_spending)\n    @pytest.mark.xfail(reason=\"Добавляется один день к дате\")\n    def test_get_spending_after_update(\n        self, spends_client: SpendsClient, spendings_list: list[SpendGet], delete_spendings_lock\n    ):\n        spend = random.choice(spendings_list)\n        new_amount = 9999.99\n        new_description = \"Multiple fields updated\"\n        new_date = \"2024-06-15T12:00:00.000Z\"\n        updated_spend = spends_client.update_spending(\n            data=SpendAdd(\n                id=spend.id,\n                amount=new_amount,\n                category=CategoryAdd(name=spend.category.name),\n                currency=spend.currency,\n                description=new_description,\n                spendDate=new_date\n            )\n        )\n        received_spend = spends_client.get_spending_by_id(updated_spend.id)\n        with allure.step(\"Проверка, что получен правильный расход после обновления\"):\n            assert received_spend.id == updated_spend.id\n            assert received_spend.amount == new_amount\n            assert received_spend.category.name == spend.category.name\n            assert received_spend.currency == spend.currency\n            assert received_spend.description == new_description\n>           assert received_spend.spendDate.split(\"T\")[0] == new_date.split(\"T\")[0]\nE           AssertionError: assert '2024-06-14' == '2024-06-15'\nE             \nE             - 2024-06-15\nE             ?          ^\nE             + 2024-06-14\nE             ?          ^\n\ntests/rest_api/test_spendings_api.py:281: AssertionError",
    "steps" : [ {
      "name" : "API Редактирование траты",
      "time" : {
        "start" : 1755396904001,
        "stop" : 1755396904037,
        "duration" : 36
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "PATCH /api/spends/edit",
        "time" : {
          "start" : 1755396904008,
          "stop" : 1755396904037,
          "duration" : 29
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "4489af4b8e60018a",
          "name" : "Request",
          "source" : "4489af4b8e60018a.html",
          "type" : "text/html",
          "size" : 4386
        }, {
          "uid" : "79ae24fa328c01b",
          "name" : "Response json 200",
          "source" : "79ae24fa328c01b.json",
          "type" : "application/json",
          "size" : 413
        }, {
          "uid" : "bf7786fba907c0ee",
          "name" : "Response headers 200",
          "source" : "bf7786fba907c0ee.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id='c6cb259c-8a7e-44e6-b927-f6ebfdb9cde0', amount=9999.99, description='Multiple fields updated', category=CategoryAdd(id=None, name='Спорт', username=None, archived=False), spendDate='2024-06-15T12:00:00.000Z', currency='KZT', username=None)"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Получение траты по ID",
      "time" : {
        "start" : 1755396904037,
        "stop" : 1755396904055,
        "duration" : 18
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /api/spends/c6cb259c-8a7e-44e6-b927-f6ebfdb9cde0",
        "time" : {
          "start" : 1755396904041,
          "stop" : 1755396904054,
          "duration" : 13
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "c90c46989bb84f29",
          "name" : "Request",
          "source" : "c90c46989bb84f29.html",
          "type" : "text/html",
          "size" : 3657
        }, {
          "uid" : "f5cbdfc258b69a5c",
          "name" : "Response json 200",
          "source" : "f5cbdfc258b69a5c.json",
          "type" : "application/json",
          "size" : 413
        }, {
          "uid" : "cb89086240ce4168",
          "name" : "Response headers 200",
          "source" : "cb89086240ce4168.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "id",
        "value" : "'c6cb259c-8a7e-44e6-b927-f6ebfdb9cde0'"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "Проверка, что получен правильный расход после обновления",
      "time" : {
        "start" : 1755396904055,
        "stop" : 1755396904055,
        "duration" : 0
      },
      "status" : "failed",
      "statusMessage" : "AssertionError: assert '2024-06-14' == '2024-06-15'\n  \n  - 2024-06-15\n  ?          ^\n  + 2024-06-14\n  ?          ^\n",
      "statusTrace" : "  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-python-tests/tests/rest_api/test_spendings_api.py\", line 281, in test_get_spending_after_update\n    assert received_spend.spendDate.split(\"T\")[0] == new_date.split(\"T\")[0]\n",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    } ],
    "attachments" : [ {
      "uid" : "7d11a127769bf142",
      "name" : "log",
      "source" : "7d11a127769bf142.txt",
      "type" : "text/plain",
      "size" : 368
    } ],
    "parameters" : [ ],
    "stepsCount" : 5,
    "attachmentsCount" : 7,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ {
    "name" : "auth_api_token::0",
    "time" : {
      "start" : 1755396966923,
      "stop" : 1755396966923,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "auth_client::0",
    "time" : {
      "start" : 1755396966927,
      "stop" : 1755396966927,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "cleanup::0",
    "time" : {
      "start" : 1755396966924,
      "stop" : 1755396966924,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "spends_client::0",
    "time" : {
      "start" : 1755396966922,
      "stop" : 1755396966922,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "delete_spendings_lock::0",
    "time" : {
      "start" : 1755396904131,
      "stop" : 1755396904131,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "add_spendings::0",
    "time" : {
      "start" : 1755396904354,
      "stop" : 1755396904354,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "labels" : [ {
    "name" : "feature",
    "value" : "Spendings"
  }, {
    "name" : "story",
    "value" : "Get spendings"
  }, {
    "name" : "tag",
    "value" : "@pytest.mark.xfail(reason='Добавляется один день к дате')"
  }, {
    "name" : "tag",
    "value" : "spendings"
  }, {
    "name" : "tag",
    "value" : "api"
  }, {
    "name" : "host",
    "value" : "pkrvmubgrv54qmi"
  }, {
    "name" : "thread",
    "value" : "6961-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "package",
    "value" : "tests.rest_api.test_spendings_api"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ ],
    "tags" : [ "spendings", "@pytest.mark.xfail(reason='Добавляется один день к дате')", "api" ]
  },
  "source" : "2d3726fdaabb29be.json",
  "parameterValues" : [ ]
}