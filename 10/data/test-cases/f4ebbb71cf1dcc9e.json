{
  "uid" : "f4ebbb71cf1dcc9e",
  "name" : "Get Spending After Update",
  "fullName" : "tests.rest_api.test_spendings_api.TestSpendingsAPI#test_get_spending_after_update",
  "historyId" : "29af1402da704a47aad0b6aa1637f022",
  "time" : {
    "start" : 1756580104959,
    "stop" : 1756580105064,
    "duration" : 105
  },
  "status" : "skipped",
  "statusMessage" : "XFAIL Добавляется один день к дате\n\nAssertionError: assert '2024-06-14' == '2024-06-15'\n  \n  - 2024-06-15\n  ?          ^\n  + 2024-06-14\n  ?          ^",
  "statusTrace" : "self = <tests.rest_api.test_spendings_api.TestSpendingsAPI object at 0x7fabc4a56ba0>\nspends_client = <clients.spends_client.SpendsClient object at 0x7fabc7845010>\nspendings_list = [SpendGet(id='689f7ee8-387a-4323-9de7-fd32a71643cb', amount=9689.797, description='Heavy face.', category=CategoryGet(...='niffler_qa', archived=False), spendDate='2019-12-22T21:00:00.000+00:00', currency='EUR', username='niffler_qa'), ...]\ndelete_spendings_lock = None\n\n    @allure.story(Story.get_spending)\n    @pytest.mark.xfail(reason=\"Добавляется один день к дате\")\n    def test_get_spending_after_update(\n        self, spends_client: SpendsClient, spendings_list: list[SpendGet], delete_spendings_lock\n    ):\n        spend = random.choice(spendings_list)\n        new_amount = 9999.99\n        new_description = \"Multiple fields updated\"\n        new_date = \"2024-06-15T12:00:00.000Z\"\n        updated_spend = spends_client.update_spending(\n            data=SpendAdd(\n                id=spend.id,\n                amount=new_amount,\n                category=CategoryAdd(name=spend.category.name),\n                currency=spend.currency,\n                description=new_description,\n                spendDate=new_date\n            )\n        )\n        received_spend = spends_client.get_spending_by_id(updated_spend.id)\n        with allure.step(\"Проверка, что получен правильный расход после обновления\"):\n            assert received_spend.id == updated_spend.id\n            assert received_spend.amount == new_amount\n            assert received_spend.category.name == spend.category.name\n            assert received_spend.currency == spend.currency\n            assert received_spend.description == new_description\n>           assert received_spend.spendDate.split(\"T\")[0] == new_date.split(\"T\")[0]\nE           AssertionError: assert '2024-06-14' == '2024-06-15'\nE             \nE             - 2024-06-15\nE             ?          ^\nE             + 2024-06-14\nE             ?          ^\n\ntests/rest_api/test_spendings_api.py:281: AssertionError",
  "flaky" : false,
  "newFailed" : false,
  "beforeStages" : [ {
    "name" : "[F] Spendings List",
    "time" : {
      "start" : 1756580104879,
      "stop" : 1756580104954,
      "duration" : 75
    },
    "status" : "passed",
    "steps" : [ {
      "name" : "API Получение списка трат",
      "time" : {
        "start" : 1756580104880,
        "stop" : 1756580104954,
        "duration" : 74
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /api/v2/spends/all",
        "time" : {
          "start" : 1756580104887,
          "stop" : 1756580104951,
          "duration" : 64
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "e791c4def3ee8bd2",
          "name" : "Request",
          "source" : "e791c4def3ee8bd2.html",
          "type" : "text/html",
          "size" : 3619
        }, {
          "uid" : "82fae00c14421a88",
          "name" : "Response json 200",
          "source" : "82fae00c14421a88.json",
          "type" : "application/json",
          "size" : 8515
        }, {
          "uid" : "21ab90c73bb3d81f",
          "name" : "Response headers 200",
          "source" : "21ab90c73bb3d81f.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 2,
    "attachmentsCount" : 3,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[S] Spends Client",
    "time" : {
      "start" : 1756580101738,
      "stop" : 1756580101738,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Auth Api Token",
    "time" : {
      "start" : 1756580100576,
      "stop" : 1756580101737,
      "duration" : 1161
    },
    "status" : "passed",
    "steps" : [ {
      "name" : "API Регистрация пользователя",
      "time" : {
        "start" : 1756580100576,
        "stop" : 1756580100928,
        "duration" : 352
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /register",
        "time" : {
          "start" : 1756580100586,
          "stop" : 1756580100612,
          "duration" : 26
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "6f6a421bba8e96ca",
          "name" : "Request",
          "source" : "6f6a421bba8e96ca.html",
          "type" : "text/html",
          "size" : 1353
        }, {
          "uid" : "42c713661f49d27f",
          "name" : "Response text 200",
          "source" : "42c713661f49d27f.txt",
          "type" : "text/plain",
          "size" : 3731
        }, {
          "uid" : "50a0d8e5d1bc2102",
          "name" : "Response headers 200",
          "source" : "50a0d8e5d1bc2102.json",
          "type" : "application/json",
          "size" : 603
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      }, {
        "name" : "POST /register",
        "time" : {
          "start" : 1756580100622,
          "stop" : 1756580100928,
          "duration" : 306
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "4efb65bca2fc9bca",
          "name" : "Request",
          "source" : "4efb65bca2fc9bca.html",
          "type" : "text/html",
          "size" : 2184
        }, {
          "uid" : "d85ec421df1a20b7",
          "name" : "Response text 400",
          "source" : "d85ec421df1a20b7.txt",
          "type" : "text/plain",
          "size" : 3800
        }, {
          "uid" : "1f4b0d0c24158fb3",
          "name" : "Response headers 400",
          "source" : "1f4b0d0c24158fb3.json",
          "type" : "application/json",
          "size" : 553
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "username",
        "value" : "'niffler_qa'"
      }, {
        "name" : "password",
        "value" : "'password'"
      } ],
      "stepsCount" : 2,
      "attachmentsCount" : 6,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Авторизация и получение токена",
      "time" : {
        "start" : 1756580100928,
        "stop" : 1756580101737,
        "duration" : 809
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /oauth2/authorize",
        "time" : {
          "start" : 1756580100941,
          "stop" : 1756580101100,
          "duration" : 159
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "ca6ad3002df014d",
          "name" : "Request",
          "source" : "ca6ad3002df014d.html",
          "type" : "text/html",
          "size" : 1687
        }, {
          "uid" : "c0014ed97c67c18c",
          "name" : "Response text 200",
          "source" : "c0014ed97c67c18c.txt",
          "type" : "text/plain",
          "size" : 2897
        }, {
          "uid" : "3b61cb9701e639dd",
          "name" : "Response headers 200",
          "source" : "3b61cb9701e639dd.json",
          "type" : "application/json",
          "size" : 526
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      }, {
        "name" : "POST /login",
        "time" : {
          "start" : 1756580101108,
          "stop" : 1756580101594,
          "duration" : 486
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "85c9cd2e8a790f9a",
          "name" : "Request",
          "source" : "85c9cd2e8a790f9a.html",
          "type" : "text/html",
          "size" : 1867
        }, {
          "uid" : "bb2177b0fdc9817f",
          "name" : "Response text 200",
          "source" : "bb2177b0fdc9817f.txt",
          "type" : "text/plain",
          "size" : 417
        }, {
          "uid" : "b91ef47e02cdd82",
          "name" : "Response headers 200",
          "source" : "b91ef47e02cdd82.json",
          "type" : "application/json",
          "size" : 287
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      }, {
        "name" : "POST /oauth2/token",
        "time" : {
          "start" : 1756580101603,
          "stop" : 1756580101737,
          "duration" : 134
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "b7c34213154603f7",
          "name" : "Request",
          "source" : "b7c34213154603f7.html",
          "type" : "text/html",
          "size" : 2846
        }, {
          "uid" : "b411068d0bfa8079",
          "name" : "Response json 200",
          "source" : "b411068d0bfa8079.json",
          "type" : "application/json",
          "size" : 1537
        }, {
          "uid" : "b3e3936f71d61cf3",
          "name" : "Response headers 200",
          "source" : "b3e3936f71d61cf3.json",
          "type" : "application/json",
          "size" : 440
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "username",
        "value" : "'niffler_qa'"
      }, {
        "name" : "password",
        "value" : "'password'"
      } ],
      "stepsCount" : 3,
      "attachmentsCount" : 9,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 7,
    "attachmentsCount" : 15,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[C] Add Spendings",
    "time" : {
      "start" : 1756580102963,
      "stop" : 1756580103605,
      "duration" : 642
    },
    "status" : "passed",
    "steps" : [ {
      "name" : "API Получение списка трат",
      "time" : {
        "start" : 1756580102963,
        "stop" : 1756580103110,
        "duration" : 147
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /api/v2/spends/all",
        "time" : {
          "start" : 1756580102970,
          "stop" : 1756580103110,
          "duration" : 140
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "c719ae083cd1cb7c",
          "name" : "Request",
          "source" : "c719ae083cd1cb7c.html",
          "type" : "text/html",
          "size" : 3619
        }, {
          "uid" : "443f159a73f1441a",
          "name" : "Response json 200",
          "source" : "443f159a73f1441a.json",
          "type" : "application/json",
          "size" : 1167
        }, {
          "uid" : "94eb9c16afccd342",
          "name" : "Response headers 200",
          "source" : "94eb9c16afccd342.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103111,
        "stop" : 1756580103177,
        "duration" : 66
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103121,
          "stop" : 1756580103177,
          "duration" : 56
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "d55e01d8efd4f74c",
          "name" : "Request",
          "source" : "d55e01d8efd4f74c.html",
          "type" : "text/html",
          "size" : 4380
        }, {
          "uid" : "9f0bcbd41e8045ec",
          "name" : "Response json 201",
          "source" : "9f0bcbd41e8045ec.json",
          "type" : "application/json",
          "size" : 435
        }, {
          "uid" : "b621bd4df2f1e4e1",
          "name" : "Response headers 201",
          "source" : "b621bd4df2f1e4e1.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=369.0, description='Government.', category=CategoryAdd(id=None, name='Развлечения', username=None, archived=False), spendDate='2013-04-03T21:04:15.000Z', currency='KZT', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103178,
        "stop" : 1756580103225,
        "duration" : 47
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103187,
          "stop" : 1756580103224,
          "duration" : 37
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "75312f189416f042",
          "name" : "Request",
          "source" : "75312f189416f042.html",
          "type" : "text/html",
          "size" : 4302
        }, {
          "uid" : "34bb93dc552154b5",
          "name" : "Response json 201",
          "source" : "34bb93dc552154b5.json",
          "type" : "application/json",
          "size" : 399
        }, {
          "uid" : "688984ef4623b660",
          "name" : "Response headers 201",
          "source" : "688984ef4623b660.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=874.0, description='Heavy face.', category=CategoryAdd(id=None, name='Спорт', username=None, archived=False), spendDate='2011-10-10T21:04:26.000Z', currency='USD', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103225,
        "stop" : 1756580103269,
        "duration" : 44
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103233,
          "stop" : 1756580103269,
          "duration" : 36
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "90974118c77d7c15",
          "name" : "Request",
          "source" : "90974118c77d7c15.html",
          "type" : "text/html",
          "size" : 4335
        }, {
          "uid" : "1b00faea1a37cade",
          "name" : "Response json 201",
          "source" : "1b00faea1a37cade.json",
          "type" : "application/json",
          "size" : 414
        }, {
          "uid" : "15ae3e6ce089a0e6",
          "name" : "Response headers 201",
          "source" : "15ae3e6ce089a0e6.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=925.0, description='Perform.', category=CategoryAdd(id=None, name='Продукты', username=None, archived=False), spendDate='2006-11-17T04:25:45.000Z', currency='KZT', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103270,
        "stop" : 1756580103328,
        "duration" : 58
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103276,
          "stop" : 1756580103328,
          "duration" : 52
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "a57b1625c28e4e53",
          "name" : "Request",
          "source" : "a57b1625c28e4e53.html",
          "type" : "text/html",
          "size" : 4372
        }, {
          "uid" : "6b510b43c16a2656",
          "name" : "Response json 201",
          "source" : "6b510b43c16a2656.json",
          "type" : "application/json",
          "size" : 431
        }, {
          "uid" : "56e0c328b2e1339b",
          "name" : "Response headers 201",
          "source" : "56e0c328b2e1339b.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=967.0, description='Across.', category=CategoryAdd(id=None, name='Развлечения', username=None, archived=False), spendDate='2005-04-10T21:02:46.000Z', currency='USD', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103328,
        "stop" : 1756580103386,
        "duration" : 58
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103336,
          "stop" : 1756580103386,
          "duration" : 50
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "51be8506c9744db7",
          "name" : "Request",
          "source" : "51be8506c9744db7.html",
          "type" : "text/html",
          "size" : 4366
        }, {
          "uid" : "8ac4f9886968cb20",
          "name" : "Response json 201",
          "source" : "8ac4f9886968cb20.json",
          "type" : "application/json",
          "size" : 428
        }, {
          "uid" : "1b07f3bd73466e01",
          "name" : "Response headers 201",
          "source" : "1b07f3bd73466e01.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=648.0, description='Arm.', category=CategoryAdd(id=None, name='Развлечения', username=None, archived=False), spendDate='2010-06-08T19:18:31.000Z', currency='KZT', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103386,
        "stop" : 1756580103448,
        "duration" : 62
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103405,
          "stop" : 1756580103448,
          "duration" : 43
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "d75f17cb9c98f62a",
          "name" : "Request",
          "source" : "d75f17cb9c98f62a.html",
          "type" : "text/html",
          "size" : 4374
        }, {
          "uid" : "98c881a8577f271d",
          "name" : "Response json 201",
          "source" : "98c881a8577f271d.json",
          "type" : "application/json",
          "size" : 432
        }, {
          "uid" : "b12ec2ca351fdb86",
          "name" : "Response headers 201",
          "source" : "b12ec2ca351fdb86.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=884.0, description='Big cup.', category=CategoryAdd(id=None, name='Развлечения', username=None, archived=False), spendDate='2019-12-23T14:37:58.000Z', currency='EUR', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103448,
        "stop" : 1756580103505,
        "duration" : 57
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103457,
          "stop" : 1756580103505,
          "duration" : 48
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "32b1ce43d266411e",
          "name" : "Request",
          "source" : "32b1ce43d266411e.html",
          "type" : "text/html",
          "size" : 4290
        }, {
          "uid" : "dd2009f42b5e6258",
          "name" : "Response json 201",
          "source" : "dd2009f42b5e6258.json",
          "type" : "application/json",
          "size" : 393
        }, {
          "uid" : "ad18aff5459a9fd3",
          "name" : "Response headers 201",
          "source" : "ad18aff5459a9fd3.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=589.0, description='Rich.', category=CategoryAdd(id=None, name='Спорт', username=None, archived=False), spendDate='2002-01-24T01:43:20.000Z', currency='USD', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103505,
        "stop" : 1756580103571,
        "duration" : 66
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103526,
          "stop" : 1756580103571,
          "duration" : 45
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "16d6b2740a72cd7",
          "name" : "Request",
          "source" : "16d6b2740a72cd7.html",
          "type" : "text/html",
          "size" : 4337
        }, {
          "uid" : "eb35a4f3661e5ad1",
          "name" : "Response json 201",
          "source" : "eb35a4f3661e5ad1.json",
          "type" : "application/json",
          "size" : 415
        }, {
          "uid" : "4a0c0a63ace311c5",
          "name" : "Response headers 201",
          "source" : "4a0c0a63ace311c5.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=692.0, description='Our base.', category=CategoryAdd(id=None, name='Продукты', username=None, archived=False), spendDate='2014-01-19T04:15:35.000Z', currency='EUR', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Добавление траты",
      "time" : {
        "start" : 1756580103572,
        "stop" : 1756580103605,
        "duration" : 33
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "POST /api/spends/add",
        "time" : {
          "start" : 1756580103579,
          "stop" : 1756580103605,
          "duration" : 26
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "a0befdd4c84ab47a",
          "name" : "Request",
          "source" : "a0befdd4c84ab47a.html",
          "type" : "text/html",
          "size" : 4308
        }, {
          "uid" : "2ab356ffd0c515d7",
          "name" : "Response json 201",
          "source" : "2ab356ffd0c515d7.json",
          "type" : "application/json",
          "size" : 402
        }, {
          "uid" : "8d9231d8c507606d",
          "name" : "Response headers 201",
          "source" : "8d9231d8c507606d.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id=None, amount=905.0, description='Together some.', category=CategoryAdd(id=None, name='Спорт', username=None, archived=False), spendDate='2015-10-02T02:54:20.000Z', currency='USD', username='niffler_qa')"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 20,
    "attachmentsCount" : 30,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[S]  Session Faker",
    "time" : {
      "start" : 1756580099904,
      "stop" : 1756580100006,
      "duration" : 102
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Spends Db",
    "time" : {
      "start" : 1756580100012,
      "stop" : 1756580100074,
      "duration" : 62
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Auth Client",
    "time" : {
      "start" : 1756580100011,
      "stop" : 1756580100011,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Auth Db",
    "time" : {
      "start" : 1756580100074,
      "stop" : 1756580100074,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[F] Delete Spendings Lock",
    "time" : {
      "start" : 1756580104955,
      "stop" : 1756580104958,
      "duration" : 3
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Spendings Data",
    "time" : {
      "start" : 1756580102961,
      "stop" : 1756580102962,
      "duration" : 1
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Client Envs",
    "time" : {
      "start" : 1756580100006,
      "stop" : 1756580100007,
      "duration" : 1
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "a0391fde3263c6b5",
      "name" : "client_envs.json",
      "source" : "a0391fde3263c6b5.json",
      "type" : "application/json",
      "size" : 66
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 1,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  }, {
    "name" : "[S] Userdata Db",
    "time" : {
      "start" : 1756580100075,
      "stop" : 1756580100075,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Lock Manager",
    "time" : {
      "start" : 1756580100012,
      "stop" : 1756580100012,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Cleanup",
    "time" : {
      "start" : 1756580100075,
      "stop" : 1756580100576,
      "duration" : 501
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Faker",
    "time" : {
      "start" : 1756580102959,
      "stop" : 1756580102961,
      "duration" : 2
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "[S] Server Envs",
    "time" : {
      "start" : 1756580100007,
      "stop" : 1756580100011,
      "duration" : 4
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "58ba4e304c8ebd44",
      "name" : "server_envs.json",
      "source" : "58ba4e304c8ebd44.json",
      "type" : "application/json",
      "size" : 582
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 1,
    "shouldDisplayMessage" : false,
    "hasContent" : true
  } ],
  "testStage" : {
    "status" : "skipped",
    "statusMessage" : "XFAIL Добавляется один день к дате\n\nAssertionError: assert '2024-06-14' == '2024-06-15'\n  \n  - 2024-06-15\n  ?          ^\n  + 2024-06-14\n  ?          ^",
    "statusTrace" : "self = <tests.rest_api.test_spendings_api.TestSpendingsAPI object at 0x7fabc4a56ba0>\nspends_client = <clients.spends_client.SpendsClient object at 0x7fabc7845010>\nspendings_list = [SpendGet(id='689f7ee8-387a-4323-9de7-fd32a71643cb', amount=9689.797, description='Heavy face.', category=CategoryGet(...='niffler_qa', archived=False), spendDate='2019-12-22T21:00:00.000+00:00', currency='EUR', username='niffler_qa'), ...]\ndelete_spendings_lock = None\n\n    @allure.story(Story.get_spending)\n    @pytest.mark.xfail(reason=\"Добавляется один день к дате\")\n    def test_get_spending_after_update(\n        self, spends_client: SpendsClient, spendings_list: list[SpendGet], delete_spendings_lock\n    ):\n        spend = random.choice(spendings_list)\n        new_amount = 9999.99\n        new_description = \"Multiple fields updated\"\n        new_date = \"2024-06-15T12:00:00.000Z\"\n        updated_spend = spends_client.update_spending(\n            data=SpendAdd(\n                id=spend.id,\n                amount=new_amount,\n                category=CategoryAdd(name=spend.category.name),\n                currency=spend.currency,\n                description=new_description,\n                spendDate=new_date\n            )\n        )\n        received_spend = spends_client.get_spending_by_id(updated_spend.id)\n        with allure.step(\"Проверка, что получен правильный расход после обновления\"):\n            assert received_spend.id == updated_spend.id\n            assert received_spend.amount == new_amount\n            assert received_spend.category.name == spend.category.name\n            assert received_spend.currency == spend.currency\n            assert received_spend.description == new_description\n>           assert received_spend.spendDate.split(\"T\")[0] == new_date.split(\"T\")[0]\nE           AssertionError: assert '2024-06-14' == '2024-06-15'\nE             \nE             - 2024-06-15\nE             ?          ^\nE             + 2024-06-14\nE             ?          ^\n\ntests/rest_api/test_spendings_api.py:281: AssertionError",
    "steps" : [ {
      "name" : "API Редактирование траты",
      "time" : {
        "start" : 1756580104959,
        "stop" : 1756580105025,
        "duration" : 66
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "PATCH /api/spends/edit",
        "time" : {
          "start" : 1756580104970,
          "stop" : 1756580105025,
          "duration" : 55
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "b05dd17cf6f40234",
          "name" : "Request",
          "source" : "b05dd17cf6f40234.html",
          "type" : "text/html",
          "size" : 4464
        }, {
          "uid" : "d5ee0b7a18893a7a",
          "name" : "Response json 200",
          "source" : "d5ee0b7a18893a7a.json",
          "type" : "application/json",
          "size" : 449
        }, {
          "uid" : "7d2432229600fced",
          "name" : "Response headers 200",
          "source" : "7d2432229600fced.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "data",
        "value" : "SpendAdd(id='689f7ee8-387a-4323-9de7-fd32a71643cb', amount=9999.99, description='Multiple fields updated', category=CategoryAdd(id=None, name='Развлечения', username=None, archived=False), spendDate='2024-06-15T12:00:00.000Z', currency='USD', username=None)"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "API Получение траты по ID",
      "time" : {
        "start" : 1756580105025,
        "stop" : 1756580105062,
        "duration" : 37
      },
      "status" : "passed",
      "steps" : [ {
        "name" : "GET /api/spends/689f7ee8-387a-4323-9de7-fd32a71643cb",
        "time" : {
          "start" : 1756580105034,
          "stop" : 1756580105062,
          "duration" : 28
        },
        "status" : "passed",
        "steps" : [ ],
        "attachments" : [ {
          "uid" : "f540efd0f4a0d17f",
          "name" : "Request",
          "source" : "f540efd0f4a0d17f.html",
          "type" : "text/html",
          "size" : 3657
        }, {
          "uid" : "1048b2990792d58d",
          "name" : "Response json 200",
          "source" : "1048b2990792d58d.json",
          "type" : "application/json",
          "size" : 449
        }, {
          "uid" : "4ad2a29b7dcd7056",
          "name" : "Response headers 200",
          "source" : "4ad2a29b7dcd7056.json",
          "type" : "application/json",
          "size" : 490
        } ],
        "parameters" : [ ],
        "stepsCount" : 0,
        "attachmentsCount" : 3,
        "shouldDisplayMessage" : false,
        "hasContent" : true
      } ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "id",
        "value" : "'689f7ee8-387a-4323-9de7-fd32a71643cb'"
      } ],
      "stepsCount" : 1,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "Проверка, что получен правильный расход после обновления",
      "time" : {
        "start" : 1756580105062,
        "stop" : 1756580105062,
        "duration" : 0
      },
      "status" : "failed",
      "statusMessage" : "AssertionError: assert '2024-06-14' == '2024-06-15'\n  \n  - 2024-06-15\n  ?          ^\n  + 2024-06-14\n  ?          ^\n",
      "statusTrace" : "  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-python-tests/tests/rest_api/test_spendings_api.py\", line 281, in test_get_spending_after_update\n    assert received_spend.spendDate.split(\"T\")[0] == new_date.split(\"T\")[0]\n",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    } ],
    "attachments" : [ {
      "uid" : "1392fbeed2bd257e",
      "name" : "log",
      "source" : "1392fbeed2bd257e.txt",
      "type" : "text/plain",
      "size" : 368
    } ],
    "parameters" : [ ],
    "stepsCount" : 5,
    "attachmentsCount" : 7,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ {
    "name" : "spends_client::0",
    "time" : {
      "start" : 1756580169067,
      "stop" : 1756580169067,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "auth_api_token::0",
    "time" : {
      "start" : 1756580169067,
      "stop" : 1756580169067,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "add_spendings::0",
    "time" : {
      "start" : 1756580105493,
      "stop" : 1756580105493,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "auth_client::0",
    "time" : {
      "start" : 1756580169070,
      "stop" : 1756580169070,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "delete_spendings_lock::0",
    "time" : {
      "start" : 1756580105157,
      "stop" : 1756580105157,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "cleanup::0",
    "time" : {
      "start" : 1756580169068,
      "stop" : 1756580169068,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "labels" : [ {
    "name" : "feature",
    "value" : "Spendings"
  }, {
    "name" : "story",
    "value" : "Get spendings"
  }, {
    "name" : "tag",
    "value" : "@pytest.mark.xfail(reason='Добавляется один день к дате')"
  }, {
    "name" : "tag",
    "value" : "spendings"
  }, {
    "name" : "tag",
    "value" : "api"
  }, {
    "name" : "host",
    "value" : "pkrvmccyg1gnepe"
  }, {
    "name" : "thread",
    "value" : "7044-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "package",
    "value" : "tests.rest_api.test_spendings_api"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ ],
    "history" : {
      "statistic" : {
        "failed" : 0,
        "broken" : 0,
        "skipped" : 2,
        "passed" : 0,
        "unknown" : 0,
        "total" : 2
      },
      "items" : [ {
        "uid" : "2d3726fdaabb29be",
        "reportUrl" : "https://illusionx11.github.io/niffler-py-st3/9/#testresult/2d3726fdaabb29be",
        "status" : "skipped",
        "statusDetails" : "XFAIL Добавляется один день к дате\n\nAssertionError: assert '2024-06-14' == '2024-06-15'\n  \n  - 2024-06-15\n  ?          ^\n  + 2024-06-14\n  ?          ^",
        "time" : {
          "start" : 1755396904001,
          "stop" : 1755396904056,
          "duration" : 55
        }
      } ]
    },
    "tags" : [ "spendings", "@pytest.mark.xfail(reason='Добавляется один день к дате')", "api" ]
  },
  "source" : "f4ebbb71cf1dcc9e.json",
  "parameterValues" : [ ]
}